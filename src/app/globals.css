/* Visually hidden but accessible (for SEO, screen readers) */
.sr-only {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	padding: 0 !important;
	margin: -1px !important;
	overflow: hidden !important;
	clip: rect(0,0,0,0) !important;
	border: 0 !important;
}
@import "tailwindcss";

/* Design tokens */
/* Dark theme (default) */
:root,
:root[data-theme='dark'],
html[data-theme='dark'],
html:not([data-theme]) { /* default dark */
	color-scheme: dark;
	--color-bg: #0d1117;
	--color-bg-alt: #141b24;
	--color-surface: #1c2530;
	--color-border: #243040;
	--color-accent: #3b82f6;
	--color-accent-hover: #60a5fa;
	--color-text: #d8e2ef;
	--color-text-dim: #94a3b8;
	--radius-sm: 4px;
	--radius-md: 8px;
	--radius-lg: 14px;
	--transition-base: 160ms cubic-bezier(.4,0,.2,1);
	--color-header-backdrop: rgba(0,0,0,0.7);
}

/* Light theme */
html[data-theme='light'],
:root[data-theme='light'] {
	color-scheme: light;
	--color-bg: #f5f7fa;
	--color-bg-alt: #ffffff;
	--color-surface: #ffffff;
	--color-border: #d8e2ec;
	--color-accent: #2563eb;
	--color-accent-hover: #1d4ed8;
	--color-text: #1e2933;
	--color-text-dim: #5b6b7c;
	--radius-sm: 4px;
	--radius-md: 8px;
	--radius-lg: 14px;
	--transition-base: 160ms cubic-bezier(.4,0,.2,1);
	--color-header-backdrop: rgba(255,255,255,0.75);
}

html, body { background: var(--color-bg); color: var(--color-text); }
body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial; -webkit-font-smoothing: antialiased; }

/* Scrollbar (webkit) */
::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-track { background: var(--color-bg-alt); }
::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 40px; }
::-webkit-scrollbar-thumb:hover { background: var(--color-accent); }

a { transition: color var(--transition-base), background-color var(--transition-base); }

/* Utility helpers */
.container-page { width:100%; max-width:1180px; margin-inline:auto; padding-inline:1.25rem; }
@media (min-width:640px){ .container-page { padding-inline:2.25rem; } }
@media (min-width:1024px){ .container-page { padding-inline:4rem; } }
@media (min-width:1280px){ .container-page { padding-inline:5rem; } }
@media (min-width:1536px){ .container-page { padding-inline:6rem; max-width:1280px; } }

.glass-panel { background: linear-gradient(145deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.06); backdrop-filter: blur(12px); }

.focus-ring:focus { outline:2px solid var(--color-accent); outline-offset:2px; }

/* Animations */
@keyframes fadeIn { from { opacity:0; transform:translateY(4px);} to { opacity:1; transform:translateY(0);} }
.fade-in { animation:fadeIn .4s ease both; }

/* Skeleton shimmer base */
.shimmer { position:relative; overflow:hidden; }
.shimmer::after { content:""; position:absolute; inset:0; background:linear-gradient(110deg,rgba(255,255,255,0.05) 8%,rgba(255,255,255,0.12) 18%,rgba(255,255,255,0.05) 33%); background-size:200% 100%; animation:shimmerMove 1.25s linear infinite; }
@keyframes shimmerMove { to { background-position:-200% 0; } }

/* Reading progress bar */
#reading-progress { position:fixed; top:0; left:0; height:3px; background:var(--color-accent); width:0%; z-index:50; transition:width .1s linear; }

/* Smooth theme transition (applied after initial paint) */
.theme-fade { transition: background-color .4s ease, color .4s ease, border-color .4s ease; }

/* Logo swap */
img[data-logo='dark'] { display:none; }
html[data-theme='dark'] img[data-logo='dark'] { display:inline-block; }
html[data-theme='dark'] img[data-logo='light'] { display:none; }

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
	*, *::before, *::after { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* Safe area support for devices with notches */
:root { --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); }
body { padding-top: max(0px, var(--safe-top, 0)); padding-bottom: max(0px, var(--safe-bottom, 0)); }

/* Category strip */
.category-strip { position:relative; }
.cat-scroll { display:flex; overflow-x:auto; scrollbar-width:none; -ms-overflow-style:none; padding:0.25rem 0; justify-content:center; }
.cat-scroll::-webkit-scrollbar { display:none; }
@media (min-width: 768px){
	.cat-scroll { flex-wrap:wrap; overflow:visible; justify-content:center; }
	.category-strip::before, .category-strip::after { display:none; }
}
.cat-scroll.collapsed { max-height:64px; overflow:hidden; position:relative; }
.cat-scroll.collapsed::after { content:""; position:absolute; left:0; right:0; bottom:0; height:20px; pointer-events:none; background:linear-gradient(to bottom,rgba(0,0,0,0), var(--color-bg)); }
html[data-theme='light'] .cat-scroll.collapsed::after { background:linear-gradient(to bottom,rgba(255,255,255,0), var(--color-bg)); }

/* Section label */
.section-label { font-size:0.95rem; letter-spacing:.5px; font-weight:700; text-transform:uppercase; background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-hover) 90%); -webkit-background-clip:text; background-clip:text; color:transparent; position:relative; padding-left:0.75rem; }
.section-label::before { content:""; position:absolute; left:0; top:50%; transform:translateY(-50%); width:6px; height:70%; border-radius:3px; background:var(--color-accent); box-shadow:0 0 0 1px var(--color-accent-hover); }
.section-head { position:relative; display:flex; flex-wrap:wrap; gap:0.75rem; align-items:center; border:1px solid var(--color-border); background:linear-gradient(145deg,var(--color-bg-alt),var(--color-surface)); padding:0.65rem 0.85rem 0.7rem; border-radius:14px; box-shadow:0 4px 12px -3px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,0.02); }
.section-head::after { content:""; position:absolute; inset:0; pointer-events:none; border-radius:inherit; background:radial-gradient(circle at 18% 30%,rgba(255,255,255,0.08),rgba(255,255,255,0) 60%); mix-blend-mode:overlay; }
.section-head:hover { border-color:var(--color-accent); }
.section-icon { display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:10px; background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-hover) 85%); color:#fff; box-shadow:0 2px 6px -1px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,0.08); position:relative; }
.section-icon::before { content:""; position:absolute; inset:-2px; border-radius:inherit; background:linear-gradient(135deg,var(--color-accent-hover),var(--color-accent)); opacity:0; transition:opacity .4s ease; filter:blur(6px); }
.section-icon:hover::before { opacity:0.9; }
.section-icon svg { width:16px; height:16px; }
.pill-cat { position:relative; flex:0 0 auto; background:var(--color-surface); border:1px solid var(--color-border); color:var(--color-text-dim); font-size:11px; font-weight:600; padding:6px 14px; border-radius:9999px; text-decoration:none; line-height:1; display:inline-flex; align-items:center; gap:6px; transition:background .3s,border-color .3s,color .3s, box-shadow .3s; }
.pill-cat:hover { background:var(--color-accent); border-color:var(--color-accent); color:#fff; box-shadow:0 2px 8px -2px rgba(0,0,0,.4); }
.pill-cat.active { background:linear-gradient(135deg,var(--color-accent),var(--color-accent-hover)); color:#fff; border-color:var(--color-accent); box-shadow:0 2px 10px -1px rgba(0,0,0,.5); }
html[data-theme='light'] .pill-cat.active { box-shadow:0 2px 10px -1px rgba(0,0,0,.25); }
.category-strip::before,.category-strip::after { content:""; position:absolute; top:0; bottom:0; width:40px; pointer-events:none; z-index:10; }
.category-strip::before { left:0; background:linear-gradient(to right, var(--color-bg) 0%, rgba(0,0,0,0)); }
.category-strip::after { right:0; background:linear-gradient(to left, var(--color-bg) 0%, rgba(0,0,0,0)); }
html[data-theme='light'] .category-strip::before { background:linear-gradient(to right, var(--color-bg) 0%, rgba(255,255,255,0)); }
html[data-theme='light'] .category-strip::after { background:linear-gradient(to left, var(--color-bg) 0%, rgba(255,255,255,0)); }


/* Chapters list: responsive item cap (no scrollbar) */
/* Base: show first 6 items */
.chapters-list > a:nth-child(n+7) { display: none; }
/* sm >= 640px: show first 8 */
@media (min-width: 640px) {
	.chapters-list > a { display: block; }
	.chapters-list > a:nth-child(n+9) { display: none; }
}
/* md >= 768px: show first 12 */
@media (min-width: 768px) {
	.chapters-list > a { display: block; }
	.chapters-list > a:nth-child(n+13) { display: none; }
}
/* lg >= 1024px: show first 16 */
@media (min-width: 1024px) {
	.chapters-list > a { display: block; }
	.chapters-list > a:nth-child(n+17) { display: none; }
}
/* xl >= 1280px: show first 20 */
@media (min-width: 1280px) {
	.chapters-list > a { display: block; }
	.chapters-list > a:nth-child(n+21) { display: none; }
}

